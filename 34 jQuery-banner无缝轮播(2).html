<!doctype html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<title>Document</title>
	<meta name="Keywords" content="" />
	<meta name="Description" content="" />
	<style>
		* {
			margin:0px;
			padding:0px;
		}
		ul li {
			list-style:none;
		}
		img {
			border:none;
		}
		a {
			text-decoration:none;
		}
		.box {
			width:760px;
			height:300px;
			overflow:hidden;
			margin:100px auto;
			position:relative;
		}
		.box .imgs {
			width:500%;
			height:auto;
			overflow:hidden;
			position:relative;
			top:0px;
		}
		.box .imgs li {
			float:left;
		}
		.btns {
			width:80px;
			height:16px;
			padding:3px 0px;
			position:absolute;
			bottom:20px;
			left:50%;
			margin-left:-40px;
			z-index:2;
			background:#000;
			opacity:.7;
			filter:alpha(opacity=70);
			border-radius:16px;
		}
		.btns li {
			width:16px;
			height:16px;
			border-radius:100%;
			float:left;
			background:#fff;
			color:#000;
			text-align:center;
			line-height:16px;
			margin-left:8px;
			cursor:pointer;
		}
		.btns li.on {
			background:orange;
			color:#fff;
		}
		.prev,.next {
			display:block;
			width:35px;
			height:50px;
			background:#eee;
			opacity:.6;
			filter:alpha(opacity=60);
			position:absolute;
			top:130px;
			color:#000;
			font-size:40px;
			text-align:center;
			line-height:50px;
		}
		.prev {
			left:0px;
		}
		.next {
			right:0px;
		}
	</style>
</head>
<body>
	<div class="box">
		<ul class="imgs" style="left:-760px;">
			<li><img src="img/banner-1.jpg" alt="" width="" height="" /></li>
			<li><img src="img/banner-2.jpg" alt="" width="" height="" /></li>
			<li><img src="img/banner-3.jpg" alt="" width="" height="" /></li>
		</ul>
		<ul class="btns">
			<li class="on">1</li>
			<li>2</li>
			<li>3</li>
		</ul>
		<a href="###" class="prev">&lt;</a>
		<a href="###" class="next">&gt;</a>
	</div>

	<script src="js/jquery-1.11.2.min.js"></script>
	<script>
		function initBanner(){
			//获取图片的盒子对象
			var $ulDom = $(".imgs");
			//控制轮播的索引
			var index = 1;
			//获取宽度
			var w = $ulDom.find("li").eq(0).width();
			//动画执行的时间
			var timer = 2000;
			//定时器
			var bannerTimer = null;
			
			//附加元素收尾相加的元素
			var $first = $ulDom.find("li:first").clone();
			var $last= $ulDom.find("li:last").clone();
			$ulDom.append($first);
			$ulDom.prepend($last);
			//获取长度
			var length = $(".imgs").children().length;

			//下一张
			$(".next").click(function(){
				//清除动画
				clearInterval(bannerTimer);
				index++;
				if(index == length-1){
					$ulDom.css("left",0);
					index = 1;
				};
				$ulDom.stop(true,true).animate({"left":-1 * w * index });
				$(".box").find(".btns li").eq(index-1).addClass("on").siblings().removeClass("on");
			}).mouseleave(function(){
				//离开的执行动画
				playBanner();
			}).mouseover(function(){
				clearInterval(bannerTimer);
			});
		
			//上一张
			$(".prev").click(function(){
				//清除动画
				clearInterval(bannerTimer);
				index--;
				if(index == 0){
					//最后一张
					index = length - 2;	
					$ulDom.stop(true,true).animate({"left":0},function(){
						//显示最后一个张图片
						$(this).css("left",-1 * w * index);
					});
				}else{
					$ulDom.stop(true,true).animate({"left":-1 * w * index});
				}

				$(".box").find(".btns li").eq(index-1).addClass("on").siblings().removeClass("on");
			}).mouseleave(function(){
				//离开的执行动画
				playBanner();
			}).mouseover(function(){
				clearInterval(bannerTimer);
			});


			/*小圆圈的绑定事件*/
			$(".box").find(".btns li").click(function(){
				clearInterval(bannerTimer);
				index = $(this).index()+1;
				$(this).addClass("on").siblings().removeClass("on");
				$ulDom.stop(true,true).animate({"left":-1 * w * index });
			}).mouseleave(function(){
				//离开的执行动画
				playBanner();
			}).mouseover(function(){
				clearInterval(bannerTimer);
			});

			//banner的定时器轮播
			function playBanner(){
				bannerTimer = setInterval(function(){
					index++;
					if(index == length-1){
						$ulDom.css("left",0);
						index = 1;
					};
					$ulDom.stop(true,true).animate({"left":-1 * w * index });
					$(".box").find(".btns li").eq(index-1).addClass("on").siblings().removeClass("on");

				},timer);	
			};
			//执行轮播
			playBanner();
		};

		$(function(){
			//调用banner效果
			initBanner();
		});
	</script>
</body>
</html>
